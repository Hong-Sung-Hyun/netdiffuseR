---
title: "README"
author: "George G. Vega Yon"
date: paste("Compiled on", Sys.date())
output: 
  md_document:
    variant: markdown_github
---

# netdiffuseR: Network Analysis for Diffusion of Innovations

[![Build Status](https://travis-ci.org/USCCANA/netdiffuseR.svg?branch=master)](https://travis-ci.org/USCCANA/netdiffuseR) [![Build status](https://ci.appveyor.com/api/projects/status/6u48wgl1lqak2jum?svg=true)](https://ci.appveyor.com/project/gvegayon/netdiffuser) [![codecov.io](https://codecov.io/github/USCCANA/netdiffuseR/coverage.svg?branch=master)](https://codecov.io/github/USCCANA/netdiffuseR?branch=master) 
[![](http://cranlogs.r-pkg.org/badges/netdiffuseR)](http://cran.rstudio.com/web/packages/netdiffuseR/index.html) [![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/netdiffuseR)](http://cran.r-project.org/package=netdiffuseR)

This package contains functions useful for analyzing network data for diffusion of innovations applications.

The package was developed as part of the paper Thomas W. Valente, Stephanie R.
Dyal, Kar-Hai Chu, Heather Wipfli, Kayo Fujimoto, *Diffusion of innovations theory applied to global tobacco control treaty ratification*,
Social Science & Medicine, Volume 145, November 2015, Pages 89-97, ISSN 0277-9536
(available [here](http://www.sciencedirect.com/science/article/pii/S027795361530143X))

From the description:

> Empirical statistical analysis, visualization and simulation
> of network models of the diffusion of innovations. The package implements
> algorithms for calculating network diffusion statistics such as transmission
> rate, hazard rates, exposure models, network threshold levels, infectiousness
> (contagion), and susceptibility. The package is inspired by work published
> in Valente, et al., (2015) <DOI:10.1016/j.socscimed.2015.10.001>;
> Valente (1995) <ISBN:9781881303213>, Myers (2000) <DOI:10.1086/303110>,
> Iyengar and others (2011) <DOI:10.1287/mksc.1100.0566>,
> Burt (1987) <DOI:10.1086/228667>; among others.
  
__Acknowledgements__:  netdiffuseR was created with the support of grant R01 CA157577 from the National Cancer Institute/National Institutes of Health. 

## News

Changelog can be view [here](NEWS.md).

* [2016-03-16] Next CRAN release scheduled for April 11th 2016 (after the workshop).
* [2016-02-18] __netdiffuseR__ vers 1.16.2 is now on CRAN!
* [2016-02-18] We will be offering a workshop at the 2016 SUNBELT Conference (checkout the full list of workshops [here](http://insna.org/sunbelt2016/program/)).

## Installation

### CRAN version

To get the CRAN (stable) version of the package, simple type

```r
install.packages("netdiffuseR")
```

### Bleeding edge version

If you want the latest (unstable) version of __netdiffuseR__, using the `devtools` package, you can install `netdiffuseR` dev version as follows

```r
devtools::install_github('USCCANA/netdiffuseR', build_vignettes = TRUE)
```

You can skip building vignettes by setting `build_vignettes = FALSE` (so it is not required).

For the case of OSX users, there seems to be a problem when installing packages 
depending on `Rcpp`. This issue, developed [here](https://github.com/USCCANA/netdiffuseR/issues/3),
can be solved by open the terminal and typing the following

```sh
curl -O http://r.research.att.com/libs/gfortran-4.8.2-darwin13.tar.bz2
sudo tar fvxz gfortran-4.8.2-darwin13.tar.bz2 -C /
```

before installing the package through `devtools`.

## Examples

This example has been taken from the package's vignettes:


```{r}
library(netdiffuseR)
```

### Infectiousness and Susceptibility

```{r plot_infectsuscept}
# Generating a random graph
set.seed(1234)
n <- 100
nper <- 20
graph <- rgraph_er(n, nper, .5)
toa <- sample(c(1:(1+nper-1), NA), n, TRUE)
head(toa)

# Creating a diffnet object
diffnet <- as_diffnet(graph, toa)
diffnet
summary(diffnet)

# Visualizing distribution of suscep/infect
out <- plot_infectsuscep(diffnet, bins = 20,K=5, logscale = TRUE)
out <- plot_infectsuscep(diffnet, bins = 20,K=5, logscale = FALSE, exclude.zeros = TRUE)
```

### Threshold

```{r, plot_threshold, fig.height=7}
# Generating a random graph
set.seed(123)
diffnet <- rdiffnet(500, 20, rgraph.args = list(m=4))
diffnet

# Threshold with fixed vertex size
plot_threshold(diffnet)

# Threshold with vertex size = avg degree
cex <- rowMeans(dgr(diffnet))
cex <- (cex - min(cex) + 1)/(max(cex) - min(cex) + 1)/2
plot_threshold(diffnet, vertex.cex = cex)
```

### Adoption rate

```{r}
plot_adopters(diffnet)
```


### Hazard rate

```{r}
hazard_rate(diffnet)
```


### Diffusion process

```{r plot_diffnet}
plot_diffnet(diffnet, vertex.cex = 2, slices=c(1,7,15,20))
```


## To-do list

- Import/Export functions for interfacing other package's clases, in particular: `statnet` set (specially the packages `networkDynamic` and `ndtv`), `igraph` and `Rsiena`.
- Populate the tests folder.
- Use spells? (`select_egoalter` would use this)
- Classify individuals by adoption category using early adopters, adopters, and laggards, and by threshold using very low, low, high and very high threshold (Valente 95' p. 94).
- Double check all functions using adjacency matrix values.
- Remove dimnames from matrices and vectors. It is more efficient to use the ones stored in meta instead.
- Implement the Bass model
- Include function to import survey data (as shown on the vignettes)
- Exposure based on Mahalanobis distances and also Roger Leenders on weighting exposure (internal note).
